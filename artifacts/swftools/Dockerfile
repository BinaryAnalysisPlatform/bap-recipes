FROM debian:stable-slim as builder

WORKDIR /build
RUN apt-get update && apt-get install -y build-essential

RUN apt-get install -y zlib1g-dev
ADD http://swftools.org/swftools-0.9.2.tar.gz .
RUN tar xzvf swftools-0.9.2.tar.gz

WORKDIR /build/swftools-0.9.2
RUN ./configure --prefix=/build && make && \
    sed -i -e "s/swf -o/swf /" swfs/Makefile && \
    sed -i -e "s/-L / /" swfs/Makefile && \
    make install

FROM debian:stable-slim
WORKDIR /artifacts
COPY --from=builder /build/bin bin/

# CVE-2017-16868 (CWE 476)
# CVE-2017-16711 (CWE 476)
# CVE-2017-11101 (CWE 476)
# CVE-2017-11100 (CWE 476)
# CVE-2017-11097 (CWE 476)
# CVE-2017-11096 (CWE 476)
